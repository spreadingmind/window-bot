<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
        <style>
            html {
                font-family: 'Roboto Condensed', sans-serif;
            }
            html body header {
                text-align: center;
            }
            html body .container {
                width: 800px;
                margin: 0 auto;
            }
        </style>
    </head>
    <body>
        <header>
            <h1>WINDOW BOT</h3>
        </header>
        <div class="container">
            <div class="ct-chart ct-perfect-fourth"></div>
        </div>
        <script>
            const socket = new WebSocket('ws://192.168.10.24:8765');
            const dataset = [];
            const data = {
                labels: [],
                series: [dataset]
            };

            socket.addEventListener('message', function (event) {
                dataset.push(Number(event.data));
                const date = new Date();
                data.labels.push(`${date.getMinutes()}:${date.getSeconds()}`);
                if (dataset.length > 15) {
                    dataset.shift();
                    data.labels.shift();
                }
                chart.update(data);
            });

            const chart = new Chartist.Line(
                '.ct-chart',
                data,
                {
                    fullWidth: true,
                    chartPadding: {
                        right: 40,
                    },
                },
            );
        </script>
    </body>
</html>
